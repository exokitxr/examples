(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(20)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),l=n(9),o=n.n(l),i=(n(16),n(1)),r=n(2),u=n(4),c=n(3),m=n(6),p=n(5),d=n(7),h=(n(17),function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.keypath=n;for(var a=0;a<t.childNodes.length;a++)e(t.childNodes[a],n.concat([a]))}),v=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(u.a)(this,Object(c.a)(t).call(this,e));var a={nodeType:1,tagName:"HTML",value:"",attrs:[{name:"href",value:"https://"}],childNodes:[{nodeType:1,tagName:"BODY",value:"",attrs:[{name:"lol",value:"zol"}],childNodes:[{nodeType:1,tagName:"IFRAME",value:"",attrs:[{name:"src",value:"http://lol.com/"}],childNodes:[]}]}]};return h(a),n.state={root:a,selectEl:null,epoch:0},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",function(t){var n=t.data;"dom"===n.method&&(h(n.root),e.setState({root:n.root}))}),window.addEventListener("keydown",function(e){if(46===e.keyCode&&document.activeElement&&document.activeElement.getEl){var t=document.activeElement.getEl();window.postMessage({method:"edit",keypath:t.keypath,edit:{type:"remove"}})}})}},{key:"onClick",value:function(e){this.state.selectEl!==e?this.setState({selectEl:e,epoch:this.state.epoch+1}):this.setState({selectEl:null,epoch:this.state.epoch+1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"Dom"},s.a.createElement(f,{root:this.state.root,selectEl:this.state.selectEl,onClick:function(t){return e.onClick(t)}}))}}]),t}(s.a.Component),f=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={hoverEl:null},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"onMouseEnter",value:function(e){this.setState({hoverEl:e})}},{key:"onMouseLeave",value:function(e){this.state.hoverEl===e&&this.setState({hoverEl:null})}},{key:"render",value:function(){var e=this;return s.a.createElement("ul",{className:"dom-list"},s.a.createElement(E,{el:this.props.root,level:0,selectEl:this.props.selectEl,hoverEl:this.state.hoverEl,onClick:function(t){return e.props.onClick(t)},onMouseEnter:function(t){return e.onMouseEnter(t)},onMouseLeave:function(t){return e.onMouseLeave(t)}}))}}]),t}(s.a.Component),E=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).domElRef=s.a.createRef(),n.state={open:!0,dropdownOpen:!1},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.bindDomEl()}},{key:"componentDidUpdate",value:function(){this.bindDomEl()}},{key:"bindDomEl",value:function(){var e=this;this.domElRef.current&&(this.domElRef.current.getEl=function(){return e.props.el})}},{key:"getClassnames",value:function(){var e=["dom-item"];return this.state.open&&e.push("open"),this.props.selectEl===this.props.el&&e.push("select"),this.props.hoverEl===this.props.el&&e.push("hover"),e.join(" ")}},{key:"getStyle",value:function(){return{paddingLeft:"".concat(10*this.props.level,"px")}}},{key:"toggleOpen",value:function(e){this.setState({open:!this.state.open}),e.stopPropagation()}},{key:"toggleDropdownOpen",value:function(e){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"cloneTab",value:function(){var e=this.props.el,t=e.attrs.find(function(e){return"src"===e.name}).value;window.postMessage({method:"open",url:t,d:3}),this.toggleDropdownOpen(e)}},{key:"deleteTab",value:function(){var e=this.props.el;window.postMessage({method:"edit",keypath:e.keypath,edit:{type:"remove"}}),this.toggleDropdownOpen(e)}},{key:"render",value:function(){var e=this,n=this.props,a=n.el,l=n.level;return a.nodeType===Node.ELEMENT_NODE&&"IFRAME"===a.tagName?s.a.createElement("li",{className:this.getClassnames()},s.a.createElement("div",{className:"dom-item-label",style:this.getStyle(),onClick:function(){return e.props.onClick(a)},onMouseEnter:function(){return e.props.onMouseEnter(a)},onMouseLeave:function(){return e.props.onMouseLeave(a)},ref:this.domElRef,tabIndex:-1},s.a.createElement("div",{className:"dom-item-arrow",onClick:function(t){return e.toggleDropdownOpen(t)}},"..."),s.a.createElement("div",{className:"dom-item-name"}," ",function(e){var t="";if("IFRAME"===e.tagName)for(var n=0;n<e.attrs.length;n++){var a=e.attrs[n];"src"===a.name&&(t+="\n"+JSON.parse(JSON.stringify(a.value)))}return t}(a))),s.a.createElement("div",{className:"dom-item-dropmenu"},this.state.dropdownOpen?s.a.createElement("div",{className:"dom-detail"},s.a.createElement("div",{className:"dom-detail-button",onClick:function(){return e.cloneTab()}},"Clone"),s.a.createElement("div",{className:"dom-detail-button",onClick:function(){return e.deleteTab()}},"Delete")):null)):a.nodeType===Node.ELEMENT_NODE?s.a.createElement("li",{className:this.getClassnames()},s.a.createElement("div",{className:"dom-item-children"},a.childNodes.map(function(n,a){return s.a.createElement(t,{el:n,level:l,selectEl:e.props.selectEl,hoverEl:e.props.hoverEl,onClick:function(t){return e.props.onClick(t)},onMouseEnter:e.props.onMouseEnter,onMouseLeave:e.props.onMouseLeave,key:a})}))):a.nodeType===Node.TEXT_NODE&&/\S/.test(a.value)?s.a.createElement("li",{className:this.getClassnames(),onClick:function(){return e.props.onClick(a)},onMouseEnter:function(){return e.props.onMouseEnter(a)},onMouseLeave:function(){return e.props.onMouseLeave(a)},ref:this.domElRef,tabIndex:-1},s.a.createElement("div",{className:"dom-item-text",style:this.getStyle()})):null}}]),t}(s.a.Component),g=v,k=(n(18),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={open:n.props.open},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"postViewportMessage",value:function(){this.props.postViewportMessage()}},{key:"componentDidMount",value:function(){var e=document.getElementById("console"),t=document.getElementById("console-output");window.addEventListener("message",function(n){var a=n.data;"terminal"===a.method&&(t.textContent&&(t.textContent+="\n"),t.textContent+=a.output,e.scrollTop=e.scrollHeight)})}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"componentDidUpdate",value:function(e,t){this.state.open!==t.open&&(this.setState({open:t.open}),this.postViewportMessage())}},{key:"getClassnames",value:function(){var e=["Console"];return this.state.open&&e.push("open"),e.join(" ")}},{key:"onKeyDown",value:function(e){if(13===e.keyCode){var t=document.getElementById("console-input"),n=t.value;t.value="",window.postMessage({method:"eval",jsString:n})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:this.getClassnames(),id:"console"},s.a.createElement("div",{className:"console-output",id:"console-output"}),s.a.createElement("input",{type:"text",className:"console-input",id:"console-input",onKeyDown:function(t){return e.onKeyDown(t)}}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{open:e.open}}}]),t}(s.a.Component)),b=(n(19),function(){var e=document.getElementById("engine-render").getBoundingClientRect(),t=[e.x/window.innerWidth,e.y/window.innerHeight,e.width/window.innerWidth,e.height/window.innerHeight];window.postMessage({method:"viewport",viewport:t})}),N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).postMessage=n.postMessage.bind(Object(m.a)(n)),n.setFlag=n.setFlag.bind(Object(m.a)(n)),n.handleURLChange=n.handleURLChange.bind(Object(m.a)(n)),n.state={consoleOpen:!1,flags:[],item:null,settings:null,urlFocus:!1,addTab:"template",url:"https://aframe.io/a-painter/"},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){b(),window.addEventListener("resize",b)}},{key:"postMessage",value:function(e){window.postMessage({action:e,flags:this.state.flags,url:this.state.url})}},{key:"postViewportMessage",value:function(){b()}},{key:"handleURLChange",value:function(e){this.setState({url:e.target.value})}},{key:"setFlag",value:function(e){var t=e.target.value;this.state.flags.includes(t)?this.state.flags.splice(this.state.flags.indexOf(t),1):this.state.flags.push(t)}},{key:"menuItemClassNames",value:function(e){var t=["menu-item"];return e===this.state.item&&t.push("open"),t.join(" ")}},{key:"menuItemPopupClassNames",value:function(e){var t=["menu-item-popup"];return e===this.state.item&&t.push("open"),t.join(" ")}},{key:"addTabClassNames",value:function(e){var t=["menu-item-popup-tab"];return e===this.state.addTab&&t.push("selected"),t.join(" ")}},{key:"menuItemPopupItemsClassNames",value:function(e){var t=["menu-item-popup-items"];return e===this.state.addTab&&t.push("open"),t.join(" ")}},{key:"urlPopupClassNames",value:function(){var e=["url-popup"];return this.state.urlFocus&&e.push("open"),e.join(" ")}},{key:"openMenu",value:function(e){var t=this,n=this.state.item!==e;this.setState({item:n?e:null},function(){t.postMenuStatus()})}},{key:"openSettings",value:function(e){var t=this;this.setState({item:null,settings:e},function(){t.postMenuStatus()})}},{key:"openAddTab",value:function(e,t){this.setState({addTab:t}),e.stopPropagation()}},{key:"onEngineRenderClick",value:function(){this.blur()}},{key:"focusUrlInput",value:function(){var e=this;this.setState({item:null,urlFocus:!0},function(){e.postMenuStatus()})}},{key:"blurUrlInput",value:function(){var e=this;this.setState({urlFocus:!1},function(){e.postMenuStatus()})}},{key:"onUrlChange",value:function(e){this.setState({url:e.target.value})}},{key:"open3dTab",value:function(){var e=document.getElementById("url-input").value;window.postMessage({method:"open",url:e,d:3}),this.blur()}},{key:"open2dTab",value:function(){var e=document.getElementById("url-input").value;window.postMessage({method:"open",url:e,d:2}),this.blur()}},{key:"addTemplate",value:function(e){window.postMessage({method:"add",template:e}),this.blur()}},{key:"onFakeXrClick",value:function(){window.postMessage({method:"click",target:"fakeXr"}),this.blur()}},{key:"onXrClick",value:function(){window.postMessage({method:"click",target:"xr"})}},{key:"toggleConsoleOpen",value:function(e){this.setState({consoleOpen:!this.state.consoleOpen})}},{key:"blur",value:function(){var e=this;this.setState({item:null,settings:null,urlFocus:!1},function(){e.postMenuStatus()})}},{key:"postMenuStatus",value:function(){window.postMessage({method:"menu",open:null!==this.state.item||null!==this.state.settings||this.state.urlFocus})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"Engine"},s.a.createElement("div",{className:"row menu"},s.a.createElement("div",{className:this.menuItemClassNames("world"),onClick:function(){return e.openMenu("world")}},s.a.createElement("div",{className:this.menuItemPopupClassNames("world")},s.a.createElement("div",{className:"menu-item-popup-item"},"New"),s.a.createElement("div",{className:"menu-item-popup-item"},"Exit")),s.a.createElement("i",{class:"fal fa-cube"})),s.a.createElement("div",{className:this.menuItemClassNames("settings"),onClick:function(){return e.openMenu("settings")}},s.a.createElement("div",{className:this.menuItemPopupClassNames("settings")},s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.openSettings("settings")}},"Settings..."),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.openSettings("sdkPaths")}},"SDK Paths...")),s.a.createElement("i",{class:"fal fa-cogs"})),s.a.createElement("div",{className:"url"},s.a.createElement("div",{className:this.urlPopupClassNames()},s.a.createElement("div",{className:"url-item",onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.open3dTab()}},"3D Reality Tab"),s.a.createElement("div",{className:"url-item",onMouseDown:function(e){return e.preventDefault()},onClick:function(){return e.open2dTab()}},"2D Reality Tab")),s.a.createElement("input",{type:"text",className:"url-input",id:"url-input",value:this.state.url,onChange:function(t){return e.onUrlChange(t)},onFocus:function(){return e.focusUrlInput()},onBlur:function(){return e.blurUrlInput()}})),s.a.createElement("div",{className:this.menuItemClassNames("add"),onClick:function(){return e.openMenu("add")}},s.a.createElement("div",{className:this.menuItemPopupClassNames("add")},s.a.createElement("div",{className:"menu-item-popup-tabs"},s.a.createElement("div",{className:this.addTabClassNames("template"),onClick:function(t){return e.openAddTab(t,"template")}},"Template"),s.a.createElement("div",{className:this.addTabClassNames("examples"),onClick:function(t){return e.openAddTab(t,"examples")}},"Examples")),s.a.createElement("div",{className:this.menuItemPopupItemsClassNames("template")},s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("blank")}},s.a.createElement("i",{className:"fal fa-file"}),s.a.createElement("div",{className:"label"},"Blank layer")),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("aframe")}},s.a.createElement("i",{className:"fab fa-autoprefixer"}),s.a.createElement("div",{className:"label"},"A-Frame layer")),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("babylon")}},s.a.createElement("i",{className:"fab fa-btc"}),s.a.createElement("div",{className:"label"},"Babylon.js layer"))),s.a.createElement("div",{className:this.menuItemPopupItemsClassNames("examples")},s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("kitchenSink")}},s.a.createElement("i",{class:"far fa-meteor"}),s.a.createElement("div",{className:"label"},"Kitchen sink")),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("exobot")}},s.a.createElement("i",{class:"fal fa-robot"}),s.a.createElement("div",{className:"label"},"Exobot")),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("meshing")}},s.a.createElement("i",{class:"fal fa-th"}),s.a.createElement("div",{className:"label"},"Meshing")),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("planes")}},s.a.createElement("i",{class:"fal fa-solar-panel"}),s.a.createElement("div",{className:"label"},"Planes")),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("paint")}},s.a.createElement("i",{class:"fal fa-paint-brush"}),s.a.createElement("div",{className:"label"},"Paint")),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("hitTest")}},s.a.createElement("i",{class:"fal fa-crosshairs"}),s.a.createElement("div",{className:"label"},"Hit test")),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("hands")}},s.a.createElement("i",{class:"fal fa-hand-paper"}),s.a.createElement("div",{className:"label"},"Hand tracking")),s.a.createElement("div",{className:"menu-item-popup-item",onClick:function(){return e.addTemplate("eyeTracking")}},s.a.createElement("i",{class:"fal fa-eye"}),s.a.createElement("div",{className:"label"},"Eye tracking")))),s.a.createElement("i",{class:"fal fa-plus-hexagon"})),s.a.createElement("div",{className:"buttons"},s.a.createElement("div",{className:"button",onClick:function(t){return e.toggleConsoleOpen(t)}},s.a.createElement("i",{class:"fas fa-terminal"}),s.a.createElement("div",{className:"label"},"Console")),s.a.createElement("div",{className:"button",onClick:function(){return e.onXrClick()}},s.a.createElement("i",{class:"fas fa-head-vr"}),s.a.createElement("div",{className:"label"},"Enter XR")),s.a.createElement("div",{className:"button",onClick:function(){return e.onFakeXrClick()}},s.a.createElement("i",{class:"fal fa-vr-cardboard"}),s.a.createElement("div",{className:"label"},"Fake XR")))),s.a.createElement(y,{settings:"settings"===this.state.settings,open:!!this.state.settings,close:function(){return e.openSettings(null)}}),s.a.createElement("div",{className:"engine-split"},s.a.createElement("div",{className:"engine-left"},s.a.createElement("div",{className:"engine-render",id:"engine-render",onClick:function(){return e.onEngineRenderClick()}}),s.a.createElement(d.a,{minWidth:"200px",onResize:function(e,t,n,a){b()}},s.a.createElement(k,{open:this.state.consoleOpen,postViewportMessage:this.postViewportMessage}))),s.a.createElement(d.a,{minWidth:"200px",maxWidth:"300px",onResize:function(e,t,n,a){b()}},s.a.createElement("div",{className:"engine-right"},s.a.createElement(g,null)))))}}]),t}(s.a.Component),y=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={width:"960",height:"1080",xr:"all"},n}return Object(p.a)(t,e),Object(r.a)(t,[{key:"classNames",value:function(){var e=["settings"];return this.props.open&&e.push("open"),e.join(" ")}},{key:"onWidthChange",value:function(e){this.setState({width:e.target.value})}},{key:"onHeightChange",value:function(e){this.setState({height:e.target.value})}},{key:"onMetricsBlur",value:function(){var e=parseInt(this.state.width,10),t=parseInt(this.state.height,10);this.state.width!==e+""&&(e=960,this.setState({width:e+""})),this.state.height!==t+""&&(t=1080,this.setState({height:t+""})),window.postMessage({method:"fakeVrMetrics",width:e,height:t})}},{key:"onXrChange",value:function(e){this.setState({xr:e}),window.postMessage({method:"setting",key:"xr",value:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:this.classNames()},s.a.createElement("div",{className:"settings-background",onClick:function(){return e.props.close()}}),s.a.createElement("div",{className:"settings-foreground"},s.a.createElement("div",{className:"title"},"Settings"),s.a.createElement("div",null,s.a.createElement("label",null,"Width ",s.a.createElement("input",{type:"text",value:this.state.width,onChange:function(t){return e.onWidthChange(t)},onBlur:function(){return e.onMetricsBlur()}})),s.a.createElement("label",null,"Height ",s.a.createElement("input",{type:"text",value:this.state.height,onChange:function(t){return e.onHeightChange(t)},onBlur:function(){return e.onMetricsBlur()}}))),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{type:"radio",name:"xr",value:"all",checked:"all"===this.state.xr,onChange:function(t){return t.target.value?e.onXrChange("all"):null}}),s.a.createElement("span",null,"All")),s.a.createElement("label",null,s.a.createElement("input",{type:"radio",name:"xr",value:"webxr",checked:"webxr"===this.state.xr,onChange:function(t){return t.target.value?e.onXrChange("webxr"):null}}),s.a.createElement("span",null,"WebXR")),s.a.createElement("label",null,s.a.createElement("input",{type:"radio",name:"xr",value:"webvr",checked:"webvr"===this.state.xr,onChange:function(t){return t.target.value?e.onXrChange("webvr"):null}}),s.a.createElement("span",null,"WebVR")))))}}]),t}(s.a.Component),C=N;var w=function(){return s.a.createElement("div",{className:"App",id:"app",onContextMenu:function(e){return e.preventDefault(),!1}},s.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.acbbee80.chunk.js.map